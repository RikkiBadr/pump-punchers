<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pump Punchers (PPUNCH)</title>
  <style>
    :root{ --panel-w: 300px; } /* leaderboard width */
    *{ box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: #0f0f0f;
      color: #fff;
      overflow: hidden;
    }

    /* Fixed leaderboard pinned to far right */
    #leaderboard {
      position: fixed;
      top: 0; right: 0; bottom: 0;
      width: var(--panel-w);
      background: #000a;
      border-left: 2px solid #222;
      padding: 16px;
      display: flex;
      flex-direction: column;
      z-index: 50;
    }
    #leaderboard h2 {
      text-align: center;
      border-bottom: 2px solid gold;
      padding-bottom: 8px;
      margin: 8px 0 12px 0;
    }
    #topList { list-style: none; padding: 0; margin: 0; flex: 1; overflow-y: auto; }
    #topList li { margin: 8px 0; }
    #leaderboard-footer { text-align: center; font-size: 13px; font-style: italic; color: #aaa; }

    /* Stage leaves space for leaderboard on the right */
    #stage {
      position: relative;
      width: calc(100vw - var(--panel-w));
      height: 100vh;
      padding: 24px 24px 48px 24px;
    }

    /* Arena frame centered in stage */
    #arenaFrame {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: min(90vh, calc(100vw - var(--panel-w) - 80px));
      height: min(90vh, calc(100vw - var(--panel-w) - 80px));
      max-width: 1000px; max-height: 1000px;
    }

    /* Animated Crowd Panels (left/right) */
    .crowd {
      position: absolute;
      top: 0; bottom: 0;
      width: 11%;
      pointer-events: none;
      z-index: 2;
      /* subtle dark stands backdrop */
      background:
        radial-gradient(ellipse at 50% 0%, rgba(255,255,255,.07), rgba(255,255,255,0) 45%),
        repeating-linear-gradient(#1b1b1b 0 10px, #151515 10px 20px);
      border-left: 1px solid #0006;
      border-right: 1px solid #0006;
      box-shadow: inset 0 0 40px rgba(0,0,0,.7);
      overflow: hidden;
    }
    .crowd.left  { left: 0;  border-top-left-radius: 16px;  border-bottom-left-radius: 16px; }
    .crowd.right { right: 0; border-top-right-radius: 16px; border-bottom-right-radius: 16px; }

    /* Individual animated fans */
    .fan {
      position: absolute;
      width: 22px;
      height: 36px;
      transform-origin: 50% 100%;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,.5));
      opacity: .9;
    }
    .head {
      width: 16px; height: 16px; border-radius: 50%;
      margin: 0 auto 2px auto;
      background: #f2c49b;
    }
    .body {
      width: 100%; height: 18px; border-radius: 6px;
      background: #444;
    }
    .arm {
      position: absolute; top: 14px; width: 8px; height: 8px;
      border-radius: 50%;
      background: #f2c49b;
    }
    .arm.left  { left: -2px; }
    .arm.right { right: -2px; }

    /* Cheer animations */
    @keyframes crowdBob { 0%,100% { transform: translateY(0) } 50% { transform: translateY(-4px) } }
    @keyframes waveLeft  { 0%,100%{ transform: rotate(0deg)} 50%{ transform: rotate(-25deg)} }
    @keyframes waveRight { 0%,100%{ transform: rotate(0deg)} 50%{ transform: rotate(25deg)} }
    .fan { animation: crowdBob 1.8s ease-in-out infinite; }
    .fan .arm.left  { transform-origin: 100% 50%; animation: waveLeft 1.8s ease-in-out infinite; }
    .fan .arm.right { transform-origin: 0% 50%;   animation: waveRight 1.8s ease-in-out infinite; }

    /* Ring in the center of the frame */
    #ringWrap {
      position: absolute; inset: 0; margin: auto;
      width: 78%; height: 78%;
      z-index: 5;
    }
    #ring {
      position: relative;
      width: 100%; height: 100%;
      background: #101010 url('ring.png') center/contain no-repeat;
      overflow: hidden;
    }
    #ring::before {
      content: "";
      position: absolute;
      inset: 0; margin: auto;
      width: 60%; height: 60%;
      background: url('logo.png') center/contain no-repeat;
      opacity: .95; pointer-events: none; z-index: 0;
    }

    /* Quotes below ring */
    #arena-quotes {
      position: absolute;
      left: 0; right: 0; bottom: -32px;
      text-align: center;
      font-size: 14px; color: #ccc; font-style: italic;
      text-shadow: 0 2px 4px #000;
      z-index: 10;
    }

    /* Fighters */
    .fighter {
      position: absolute;
      width: 90px; height: 140px;
      transform-origin: 50% 100%;
      filter: drop-shadow(0 6px 8px rgba(0,0,0,.6));
      animation: idleBob 2.2s ease-in-out infinite;
      z-index: 10;
    }
    .label {
      position: absolute; left: 50%; top: -16px; transform: translateX(-50%);
      font-size: 12px; background: rgba(0,0,0,.55); padding: 2px 6px;
      border-radius: 6px; border: 1px solid #fff3; white-space: nowrap;
    }

    /* Fight animations */
    @keyframes idleBob { 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-6px) } }
    @keyframes punchAnim { 0%{ transform: translateX(0) } 25%{ transform: translateX(-10px) } 50%{ transform: translateX(10px) } 100%{ transform: translateX(0) } }
    @keyframes koAnim { 0%{ transform: rotate(0deg) translateY(0); opacity: 1 } 50%{ transform: rotate(90deg) translateY(40px); opacity: .7 } 100%{ transform: rotate(90deg) translateY(80px); opacity: .3 } }
    .punching { animation: punchAnim .5s ease-in-out; }
    .knocked { animation: koAnim 1.2s ease-out forwards; }

    /* Controls */
    .controls {
      position: absolute; top: -44px; left: 8px; z-index: 20; display: flex; gap: 8px;
    }
    .btn { background:#161616;border:1px solid #2a2a2a;color:#fff;padding:8px 10px;border-radius:8px;cursor:pointer }
    .btn:hover { background:#1f1f1f }

    @media (max-width: 900px){
      :root{ --panel-w: 100vw; }
      #leaderboard{ height: 40vh; width: 100vw; top: auto; }
      #stage{ width: 100vw; height: calc(100vh - 40vh); }
      #arenaFrame{ width: min(90vw, 90vh); height: min(90vw, 90vh); }
      .crowd{ display:none; } /* hide crowds on small screens for space */
      .controls{ top: 8px; }
      #arena-quotes{ bottom: -24px; }
    }
  </style>
</head>
<body>
  <div id="stage">
    <div id="arenaFrame">
      <div class="controls">
        <button class="btn" id="spawn">Spawn Demo Fighter</button>
        <button class="btn" id="spar">Make Them Spar</button>
      </div>

      <div class="crowd left" id="crowdLeft"></div>
      <div class="crowd right" id="crowdRight"></div>

      <div id="ringWrap">
        <div id="ring"></div>
        <div id="arena-quotes">"Big Dev with Huge Dreams" â€¢ "Published on Pump.fun network"</div>
      </div>
    </div>
  </div>

  <aside id="leaderboard">
    <div>
      <h2>Top Holders</h2>
      <ol id="topList">
  
    </div>
    <div id="leaderboard-footer">"Improving every hour"</div>
  </aside>

  <script>
    const ring = document.getElementById('ring');
    const crowdLeft = document.getElementById('crowdLeft');
    const crowdRight = document.getElementById('crowdRight');
    const fighterEls = [];

    // Helper randoms
    const rand = (a,b)=> Math.random()*(b-a)+a;
    const randInt = (a,b)=> Math.floor(rand(a,b));
    const pick = arr => arr[Math.floor(Math.random()*arr.length)];
    const SKINS = ["#f2c49b","#e0ac69","#d1a075","#f1c27d","#c68642"];
    const SHIRTS = ["#ff5252","#448aff","#4caf50","#ffb300","#ab47bc","#00bcd4","#9e9e9e"];

    // Build animated crowd on a side
    function buildCrowd(container, side='left'){
      container.innerHTML = '';
      const W = container.clientWidth;
      const H = container.clientHeight;
      const cols = Math.max(4, Math.floor(W/28));
      const rows = Math.max(10, Math.floor(H/34));
      const xGap = W / (cols+1);
      const yGap = H / (rows+1);
      let idx = 0;
      for(let r=0; r<rows; r++){
        for(let c=0; c<cols; c++){
          const fan = document.createElement('div');
          fan.className = 'fan';
          fan.style.left = (c*xGap + rand(-4,4) + xGap*0.4) + 'px';
          fan.style.top  = (r*yGap + rand(-3,3) + yGap*0.4) + 'px';
          fan.style.animationDelay = (idx%cols)*0.08 + 's';

          const head = document.createElement('div'); head.className = 'head'; head.style.background = pick(SKINS);
          const body = document.createElement('div'); body.className = 'body'; body.style.background = pick(SHIRTS);
          const armL = document.createElement('div'); armL.className = 'arm left';
          const armR = document.createElement('div'); armR.className = 'arm right';

          fan.appendChild(head); fan.appendChild(body); fan.appendChild(armL); fan.appendChild(armR);
          container.appendChild(fan);
          idx++;
        }
      }
    }

    // Build crowds initially and on resize
    function rebuildCrowds(){
      buildCrowd(crowdLeft, 'left');
      buildCrowd(crowdRight, 'right');
    }
    window.addEventListener('resize', rebuildCrowds);
    setTimeout(rebuildCrowds, 0);

    // Fighters
    const ringRect = () => ring.getBoundingClientRect();

    function boxerSVG({shorts, gloves, skin}){
      return `
        <svg width="90" height="120" viewBox="0 0 90 120" xmlns="http://www.w3.org/2000/svg">
          <ellipse cx="45" cy="114" rx="26" ry="6" fill="rgba(0,0,0,.35)"/>
          <rect x="33" y="46" width="24" height="34" rx="6" fill="${skin}" stroke="#000" stroke-opacity=".35"/>
          <rect x="30" y="72" width="30" height="20" rx="4" fill="${shorts}" stroke="#000" stroke-opacity=".35"/>
          <rect x="32" y="92" width="8" height="20" rx="4" fill="${skin}"/>
          <rect x="50" y="92" width="8" height="20" rx="4" fill="${skin}"/>
          <rect x="30" y="110" width="12" height="6" rx="2" fill="#333"/>
          <rect x="48" y="110" width="12" height="6" rx="2" fill="#333"/>
          <circle cx="45" cy="28" r="14" fill="${skin}" stroke="#000" stroke-opacity=".35"/>
          <rect x="20" y="52" width="14" height="10" rx="4" fill="${skin}"/>
          <rect x="56" y="52" width="14" height="10" rx="4" fill="${skin}"/>
          <circle cx="18" cy="57" r="8" fill="${gloves}" stroke="#000" stroke-opacity=".4"/>
          <circle cx="72" cy="57" r="8" fill="${gloves}" stroke="#000" stroke-opacity=".4"/>
        </svg>`;
    }

    function spawnFighter(name){
      const el = document.createElement('div');
      el.className = 'fighter';
      const r = ringRect();
      const marginX = r.width * 0.18;
      const marginY = r.height * 0.18;
      const x = marginX + Math.random()*(r.width - marginX*2 - 90);
      const y = marginY + Math.random()*(r.height - marginY*2 - 140);
      el.style.left = x + 'px';
      el.style.top  = y + 'px';
      el.innerHTML = boxerSVG({shorts:pick(SHIRTS), gloves:pick(SHIRTS), skin:pick(SKINS)});

      const label = document.createElement('div');
      label.className = 'label';
      label.textContent = name;
      el.appendChild(label);

      ring.appendChild(el);
      fighterEls.push(el);
      return el;
    }

    ["Wallet1...xyz","Wallet2...abc","Wallet3...def"].forEach(spawnFighter);

    function wander(el){
      const r = ringRect();
      const marginX = r.width * 0.18, marginY = r.height * 0.18;
      const maxX = r.width - marginX - 90, maxY = r.height - marginY - 140;
      const nx = Math.max(marginX, Math.min(maxX, (parseInt(el.style.left)||0) + (Math.random()*120-60)));
      const ny = Math.max(marginY, Math.min(maxY, (parseInt(el.style.top)||0) + (Math.random()*80-40)));
      el.style.transition = 'left .8s ease, top .8s ease';
      el.style.left = nx + 'px'; el.style.top = ny + 'px';
    }
    setInterval(()=>fighterEls.forEach(wander), 1600);

    // Fighting logic
    function spar(){
      if (fighterEls.length < 2) return;
      // pick random fighter a
      const idx = Math.floor(Math.random()*fighterEls.length);
      const a = fighterEls[idx];
      // find nearest b
      let nearest = null, best = 1e9;
      const ax = parseInt(a.style.left), ay = parseInt(a.style.top);
      fighterEls.forEach((el, i)=>{
        if (i===idx) return;
        const dx = ax - parseInt(el.style.left);
        const dy = ay - parseInt(el.style.top);
        const d = dx*dx + dy*dy;
        if (d < best){ best = d; nearest = el; }
      });
      const b = nearest || fighterEls[(idx+1)%fighterEls.length];

      const mx = (parseInt(a.style.left) + parseInt(b.style.left))/2;
      const my = (parseInt(a.style.top) + parseInt(b.style.top))/2;

      a.style.transition = b.style.transition = 'left .35s ease, top .35s ease';
      a.style.left = (mx - 60) + 'px'; a.style.top = my + 'px';
      b.style.left = (mx + 10) + 'px'; b.style.top = my + 'px';

      setTimeout(()=>{
        a.classList.add('punching');
        b.classList.add('punching');
        setTimeout(()=>{ a.classList.remove('punching'); b.classList.remove('punching'); }, 520);

        const loser = Math.random() < 0.5 ? a : b;
        loser.classList.add('knocked');
        setTimeout(()=> loser.classList.remove('knocked'), 1400);
      }, 380);
    }

    // Controls & auto spar
    document.getElementById('spar').onclick = spar;
    document.getElementById('spawn').onclick = ()=> spawnFighter(`Wallet${fighterEls.length+1}...${Math.random().toString(36).slice(2,5)}`);
    setInterval(spar, 4200);
    window.addEventListener('resize', ()=>{ fighterEls.forEach(wander); rebuildCrowds(); });
  </script>
  <script>
const MINT_ADDRESS = "YOUR_PPUNCH_MINT";   // Replace with your real mint
const API_KEY = "YOUR_HELIUS_API_KEY";     // get free key from https://helius.dev
const API_URL = `https://api.helius.xyz/v0/token-holders?api-key=${API_KEY}&mint=${MINT_ADDRESS}`;

async function loadLeaderboard() {
  try {
    const res = await fetch(API_URL);
    const data = await res.json();

    // Sort by balance (highest first)
    const sorted = data.sort((a, b) => Number(b.amount) - Number(a.amount));

    // Top 20 only
    const top20 = sorted.slice(0, 20);

    // Render into leaderboard
    const list = document.getElementById("topList");
    list.innerHTML = "";
    top20.forEach((holder, i) => {
      const li = document.createElement("li");
      li.textContent = `${i+1}. ${holder.owner.slice(0,4)}...${holder.owner.slice(-4)} â€” ${holder.amount}`;
      list.appendChild(li);
    });
  } catch (e) {
    console.error("Error loading leaderboard:", e);
  }
}

// Load when page starts + refresh every 60 sec
loadLeaderboard();
setInterval(loadLeaderboard, 60000);
</script>

</body>
</html>
